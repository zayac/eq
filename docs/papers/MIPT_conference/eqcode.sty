% Copyright (c) 2011 Pavel Zaichenkov <zaichenkov@gmail.com>
%
% Permission to use, copy, modify, and distribute this software for any
% purpose with or without fee is hereby granted, provided that the above
% copyright notice and this permission notice appear in all copies.
%
% THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
% WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
% MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
% ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
% WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
% ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
% OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.

%
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{eqcode}
%
\if@twocolumn
\newlength{\pcode@width}
\setlength{\pcode@width}{\columnwidth}
\addtolength{\pcode@width}{-40pt}
\else
\newlength{\pcode@width}
\setlength{\pcode@width}{\textwidth}
\addtolength{\pcode@width}{-40pt}
\fi
%
\RequirePackage{fullpage}
\RequirePackage{fancybox}
\RequirePackage{tabularx}
\RequirePackage{setspace}
\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{amsfonts}
\RequirePackage{ifthen}
%

\newcommand{\pcode@AF}[1]{\mbox{\textsc{#1}}} % Algorithm font
\newcommand{\pcode@tab}[1]{\hspace*{2ex}}
\newcolumntype{A}{ >{\quad $}l<{$}
}
%
\newenvironment{eqcode}[5][plain]
{%
 \begin{Sbox}%
 \begin{minipage}{\pcode@width}%
 \begin{onehalfspacing}
 \pcode@AF{$#2$}($#3$):\  $#4 \to #5$ \\
 \noindent\begin{tabular}{A}%
}%
{%
  \end{tabular}\end{onehalfspacing}\end{minipage}\end{Sbox}
  \TheSbox{}%
  \vskip 50pt
}%
%
\newcommand{\call}[2]{\pcode@AF{$#1$}(#2)} % 
\newcommand{\return}[1]{\ifthenelse{\equal{#1}{} }%
{\mbox{\bfseries return }}%
{\mbox{\bfseries return }(#1)}}
\newcommand{\print}[1]{\mbox{\bfseries print }(#1)}
\newcommand{\otherwise}{\mbox{\bfseries otherwise}}
\newcommand{\qif}[2]{\textbf{if}\ #1\ \textbf{then} \\ \noindent\begin{tabular}{A} #2 }
\newcommand{\qelseif}[2]{\end{tabular} \\ \textbf{else if}\ #1\ \textbf{then} \\ \noindent\begin{tabular}{A} #2 }
\newcommand{\qelse}[1]{\end{tabular} \\ \textbf{else} \\  \noindent\begin{tabular}{A} #1 }
\newcommand{\qendif}{\end{tabular} \\ \textbf{end if} \\}
\newcommand{\lend}{ \\ }
\newcommand{\filter}[1]{\textbf{filter}(#1)}
\newcommand{\hex}[1]{$0x#1$}
\newcommand{\type}[1]{\mathbb{#1}}
\newcommand{\match}[2]{}
\newcommand{\expr}[1]{}
\newcommand{\comment}[1]{\emph{#1} \\}
\newenvironment{tmatrix}{\begin{pmatrix}}{\end{pmatrix}}
\DeclareMathOperator{\genar}{\mathfrak{G}}

\endinput
%% END eqdcode.sty
